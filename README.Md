# ðŸ§  SQL Agent Inteligente

Este projeto implementa um agente inteligente capaz de interpretar perguntas em linguagem natural, convertÃª-las em consultas SQL seguras e executÃ¡-las em um banco de dados PostgreSQL. A soluÃ§Ã£o foi construÃ­da com foco em modularidade, observabilidade e seguranÃ§a.

---

## ðŸš€ Funcionalidades

- âœ… InterpretaÃ§Ã£o de linguagem natural (NLP)
- âœ… GeraÃ§Ã£o de queries SQL com validaÃ§Ã£o
- âœ… ExecuÃ§Ã£o segura contra SQL Injection
- âœ… Uso de mÃºltiplos agentes especializados via LangGraph
- âœ… Observabilidade com OpenTelemetry (logs no console)
- âœ… Suporte a RAG (Retrieval-Augmented Generation) via contexto local

---

## ðŸ§± Arquitetura

```bash
SQL-AGENT/
â”‚
â”œâ”€â”€ main.py                     # Interface via Streamlit
â”‚
â”œâ”€â”€ db/
â”‚   â””â”€â”€ db_init.py              # CriaÃ§Ã£o das tabelas e dados iniciais
â”‚
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ main_graph.py           # OrquestraÃ§Ã£o dos agentes com LangGraph
â”‚   â””â”€â”€ nodes/
â”‚       â”œâ”€â”€ nlp_parser_node.py      # Interpreta perguntas (NLP + RAG)
â”‚       â”œâ”€â”€ sql_generator_node.py  # Gera queries SQL
â”‚       â”œâ”€â”€ sql_validator_node.py  # Garante seguranÃ§a das queries
â”‚       â”œâ”€â”€ sql_executor_node.py   # Executa as queries no PostgreSQL
â”‚       â””â”€â”€ formatter_node.py      # Formata a resposta para exibiÃ§Ã£o
â”‚
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ contexto.txt            # Contexto usado no RAG local
â”‚
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ retriever.py            # FunÃ§Ã£o para carregar o contexto RAG
â”‚
â”œâ”€â”€ observability.py            # Logs com OpenTelemetry
â”‚
â””â”€â”€ requirements.txt            # DependÃªncias do projeto
```

## ðŸš€ Tecnologias Utilizadas

- Python 3.10+
- LangChain
- LangGraph
- Streamlit
- PostgreSQL
- OpenTelemetry
- DeepSeek (LLM usado)

---

## ðŸ“¦ Como executar o projeto localmente

### 1. Clone o repositÃ³rio
Para colar no terminal use (ctrl + shit + v)
```bash
git clone git@github.com:JeffersonSilemen/sql-agent.git
```

- Abra a pasta criada
```bash
cd sql-agent
```


### 2. CriaÃ§Ã£o do ambiente virtual
- Ã‰ altamente recomendada a criaÃ§Ã£o de um ambiente virtual para executar o projeto. Para nÃ£o atrapalhar os ambientes de desenvolvimento de outros projetos.
```bash
python3 -m venv venv 
```

- Ative o ambiente virtual
```bash
# Caso esteja usando Linux, use:
source venv/bin/activate  
# Caso esteja usando Windows, use: 
venv\Scripts\activate
```

### 3. Instale as dependÃªncias
```bash
pip install -r requirements.txt
```
